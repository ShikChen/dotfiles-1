# vim: set ft=sh:

fresh freshshell/fresh bin/fresh --bin
fresh freshshell/fresh contrib/source-build.sh --file=~/.zshrc

fresh zsh/\* --file=~/.zshrc

fresh config/\* --file
fresh bin/\* --bin

fresh_after_build() {
  # Managing zplug through fresh makes each fresh delete all cloned plugins of
  # zplug :(, so we just clone it manually here...
  if [[ ! -d ~/.zplug ]]; then
    git clone https://github.com/b4b4r07/zplug.git ~/.zplug
  fi
  if [[ ! -f $FRESH_LOCAL/.setup ]]; then
    echo -e '\e[1;33mFirst time setup! Make sure we have everything installed...\e[m'
    pushd $FRESH_LOCAL
      ./setup/main.sh
    popd
    if [[ $? == 0 ]]; then
      touch $FRESH_LOCAL/.setup
      echo -e '\e[1;33mFirst time setup complete! Delete $FRESH_LOCAL/.setup and fresh to run again.\e[m'
    else
      echo -e '\e[1;31mFirst time setup fail QQ\e[m'
      exit 1
    fi
  fi
}
